---
// ZshPrompt.astro
// Oh My Zsh style prompt component

import site from "../config/site.json";
import socials from "../config/socials.json";

// Extract domain from site URL without protocol
const getDomain = (url: string) => {
  try {
    return url.replace(/(^\w+:|^)\/\//, "");
  } catch (e) {
    return "example.com";
  }
};

const domain = getDomain(site.url);
const promptUser = `${site.name.toLowerCase().replace(/\s+/g, "")}@${domain}`;

// Simulated current directory
const currentDir = "~/portfolio";
---

<nav class="prompt relative flex flex-col font-mono text-sm pl-4">
  <!-- First line with directory and git info -->
  <div class="flex items-center justify-between gap-1 py-1">
    <div>
      <span class="text-primary">$</span>
      <span class="text-secondary">[{promptUser}]</span>
      <span class="text-primary">{currentDir}</span>
    </div>
    <div class="flex-1 h-px bg-base-content/50 mx-1"></div>
    <div class="join">
      <a
        class="bg-accent px-2 text-accent-content border-l border-base-300 cursor-pointer hover:bg-transparent hover:text-accent transition-all duration-200 join-item"
        >Projects</a
      >
      <a
        class="bg-accent px-2 text-accent-content border-l border-base-300 cursor-pointer hover:bg-transparent hover:text-accent transition-all duration-200 join-item"
        >Blog</a
      >
      <a
        class="bg-accent px-2 text-accent-content border-l border-base-300 cursor-pointer hover:bg-transparent hover:text-accent transition-all duration-200 join-item"
        >Contact</a
      >
    </div>
  </div>
  <div class="flex items-center">
    <!-- Prompt character -->
    <span class="text-primary mr-2">‚ùØ</span>

    <!-- Cursor simulation -->
    <span class="w-2 h-4 bg-info inline-block opacity-75 animate-blink"></span>
  </div>
</nav>

<style>
  .prompt:before {
    content: " ";
    display: block;
    border: 1px solid var(--color-base-content);
    opacity: 0.5;
    height: 1.65rem;
    border-right: none;
    width: 0.75rem;
    border-top-left-radius: 0.25rem;
    border-bottom-left-radius: 0.25rem;
    position: absolute;
    left: 0;
    top: 0.75rem;
  }
</style>
